<!-- ensure that the page reloads on first redirect so all data from db is up-to-date -->
<script type="text/javascript">
	$(document).ready(function () {
		//Check if the current URL contains '#'
		if (document.URL.indexOf("#") == -1) {
			// Set the URL to whatever it was plus "#".
			url = document.URL + "#";
			location = "#";

			//Reload the page
			location.reload(true);
		}
	});
</script>

<!-- dynamically update hidden textarea for selected students checked to assign a challenge to -->
<script type="text/javascript">

	window.addEventListener('click', function () {

		var checkboxes = document.getElementsByName('student');
		var result = '';

		for (var i = 0; i < checkboxes.length; i++) {
			if (checkboxes[i].checked) {
				result += checkboxes[i].value + " | ";
			};
		};

		document.getElementById('students_selected').value = result;

	});

</script>

<script type="text/javascript">
	$(document).ready(function () {
		
		$(".chosen-select").chosen({
			no_results_text: "no student with the name:"
		});

		$(".chosen-select").on('change', function(evt, params) {

			if (params.selected) {
				document.getElementById('students_selected_2').value += ',' + params.selected.toString() + ',';
			} else if (params.deselected) {
				document.getElementById('students_selected_2').value = document.getElementById('students_selected_2').value.split(',').filter(element => element !== '').filter(element => element !== params.deselected.toString());
			} else {};

			//document.getElementById('students_selected_2').value += Object.keys(params);

		});

	});
</script>
